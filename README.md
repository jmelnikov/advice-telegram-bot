# advice-telegram-bot

Идея этого бота родилась в нашем с друзьями закрытом чате.
Мы пришли к выводу, что в жизни у людей не хватает положительных эмоций, так что пусть хотя бы бот иногда пишет
что-нибудь хорошее.

Чтобы бот не отправлял сообщения случайно, он реагирует на включение подстроки *"совет"* или *"advice"* в сообщении.

Делаю бота на Go только ради изучения самого Go.
Делаю бота в свободное время, не спеша.
Возможно, делаю что-то не по правилам Go, так как только недавно начал тесно работать с ним.

Боту можно писать в личные сообщения или добавить его в любой чат, работать будет.
В случае добавления бота в чат, нужно предоставить боту разрешение на чтение всех сообщений в чате.

# Запуск

Для запуска нужно переименовать файл `app/config.json.example` в `app/config.json` и в получившемся
файле в константу `botApiKey` вставить токен Telegram-бота.
Так же, если требуется, можно изменить номер порта, на котором работает бот.

Затем, в корневой папке нужно выполнить команду `docker-compose up`.
После сборки и запуска, бот начнёт принимать запросы на порту `8080` внутри контейнера.
Если нужно запустить бота на другом порту, то номер порта можно изменить в файле `docker-compose.yml`, который находится
в корневой папке.

# База данных

В качества БД используется `sqlite`. Для управления БД можно использовать любой подходящий инструмент.

В БД есть три таблицы:

- **`user`** - для хранения данных пользователей. Сохраняется ID, имя, дата последнего сообщения.
  Так же, вручную можно добавить пол пользователя, это позволит более гибко настраивать отправляемые ботом сообщения.
- **`advice`** - в таблице хранятся ID, текст и половая принадлежность совета.
  Если указать половую принадлежность совета, то при отправке сообщения, она будет учитываться вместе с половой
  принадлежностью пользователя.
- **`greating`** - в таблице хранятся ID, текст, половая принадлежность и время суток приветствия.
  Если указать половую принадлежность приветствия, то при отправке сообщения, она будет учитываться вместе с половой
  принадлежностью пользователя.
  Так же, если указать время суток `morning`, `day`, `evening` или `night`, то это будет учитываться при отправке
  сообщения в зависимости от текущего времени.
  Время суток считается следующим образом:
  - `morning` с 06:00 по 11:00
  - `day` с 11:00 по 18:00
  - `evening` 18:00 по 23:00
  - `night` 23:00 по 06:00
